# registrationMachine.ts — описание state-машины

Машина управления шагами регистрации на корпоратив построена с использованием `xstate`. Она описывает возможные состояния, переходы между ними и правила, по которым формируется поведение интерфейса.

---

## Сценарий регистрации

1. Стартовая страница (`welcome`)
2. Выбор трансфера (`transfer`)
3. Проверка наличия приглашения (`postTransferCheck`)
4. Приглашение к размещению (`invitationPrompt`)
5. Выбор размещения (`accommodation`)
6. Выбор активностей (`activities`)
7. Подтверждение (`summary`)
8. Завершение (`completed`)

---

## Контекст

Контекст используется для хранения состояния между шагами (выбранный трансфер, проживание, активности и т.д.).

---

## Пояснение к ключевым состояниям

### welcome
- Показываем информацию о корпоративе.
- Переход к `transfer` после клика на "Зарегистрироваться".

### transfer
- Выбор способа добраться до мероприятия.
- Если выбран трансфер, можно указать слот отправления.
- `SELECT_TRANSFER → postTransferCheck`

### postTransferCheck
- Если есть `invitationId`, переходим в `invitationPrompt`.
- Иначе сразу — в `accommodation`.

### invitationPrompt
- Пользователь может согласиться на совместное размещение или отказаться.
- Согласие → сразу `activities`
- Отказ → `accommodation`

### accommodation
- Выбор размещения (2/3/5 местное).
- Возможность пригласить коллег по комнате.

### activities
- Можно выбрать не более 2 активностей.
- Активности с пересечением по времени — блокируются.

### summary
- Просмотр введённой информации перед отправкой.

### completed
- Финальный экран.
- Возможность начать заново.

---

## Прочее

- Вся логика переходов и сохранения данных оформлена через `assign`.
- Автоматические переходы (например, `postTransferCheck`) реализованы через `always`.
- Условия (`guard`) применяются для проверки состояния контекста.

---

## Файл
Машина описана в [`src/machines/registrationMachine.ts`](../machines/registrationMachine.ts)
